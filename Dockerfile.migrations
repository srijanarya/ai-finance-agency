# Migrations runner dockerfile
FROM node:20-alpine

# Install PostgreSQL client for migrations
RUN apk add --no-cache postgresql-client bash

WORKDIR /app

# Copy migration scripts
COPY migrations/ ./migrations/
COPY infrastructure/postgres/ ./postgres/

# Make scripts executable
RUN chmod +x ./postgres/run-migrations.sh

# Default command
CMD ["./postgres/run-migrations.sh"]
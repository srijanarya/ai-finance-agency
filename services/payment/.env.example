# Payment Service Environment Configuration

# Application
NODE_ENV=development
PORT=3003
HOST=0.0.0.0
API_VERSION=v1
API_PREFIX=api

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=payment_user
DATABASE_PASSWORD=payment_password
DATABASE_NAME=payment_db
DATABASE_SSL=false
DATABASE_SYNCHRONIZE=true
DATABASE_LOGGING=false

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=payment:

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-replace-in-production
JWT_EXPIRES_IN=1d

# Stripe Configuration
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# PayPal Configuration
PAYPAL_CLIENT_ID=your_paypal_client_id_here
PAYPAL_CLIENT_SECRET=your_paypal_client_secret_here
PAYPAL_MODE=sandbox
PAYPAL_WEBHOOK_ID=your_paypal_webhook_id_here

# Email Configuration (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password
EMAIL_FROM=noreply@tradingplatform.com

# Security Configuration
BCRYPT_SALT_ROUNDS=10
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=100
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# Payment Processing Configuration
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,EUR,GBP,CAD,AUD
MINIMUM_PAYMENT_AMOUNT=1.00
MAXIMUM_PAYMENT_AMOUNT=100000.00
STRIPE_FEE_PERCENTAGE=2.9
STRIPE_FIXED_FEE_USD=0.30
STRIPE_FIXED_FEE_EUR=0.25
ALLOW_PARTIAL_REFUNDS=true
REFUND_WINDOW_DAYS=30
AUTO_REFUND_THRESHOLD=10.00

# Subscription Configuration
SUBSCRIPTION_GRACE_PERIOD_DAYS=3
SUBSCRIPTION_RETRY_ATTEMPTS=3
SUBSCRIPTION_RETRY_INTERVAL_HOURS=24
SUBSCRIPTION_CANCELATION_PERIOD_DAYS=1

# Wallet Configuration
DEFAULT_DAILY_WITHDRAWAL_LIMIT=10000.00
MINIMUM_WALLET_BALANCE=0.00
MAXIMUM_WALLET_BALANCE=1000000.00
INTEREST_CALCULATION_FREQUENCY=daily
SUPPORTED_WALLET_TYPES=trading,savings,escrow
AUTO_CREATE_TRADING_WALLET=true

# Tax Configuration
ENABLE_TAX_CALCULATION=true
DEFAULT_TAX_RATE=0.0
TAX_RATE_SERVICE=internal
BUSINESS_LOCATIONS=US:CA,US:NY,US:TX

# Fraud Detection Configuration
FRAUD_DETECTION_ENABLED=true
MAX_TRANSACTIONS_PER_MINUTE=10
MAX_AMOUNT_PER_HOUR=5000.00
MAX_FAILED_ATTEMPTS_PER_DAY=5
NEW_USER_RISK_MULTIPLIER=1.5
HIGH_AMOUNT_THRESHOLD=1000.00
SUSPICIOUS_COUNTRIES=

# Compliance Configuration
KYC_REQUIRED=false
AML_SCREENING=false
SANCTIONS_LIST_CHECKING=false
CTR_THRESHOLD=10000.00
SAR_THRESHOLD=5000.00
AUDIT_LOG_RETENTION_DAYS=2555
TRANSACTION_DATA_RETENTION_DAYS=2190
USER_DATA_RETENTION_DAYS=365

# Monitoring and Alerting
ENABLE_HEALTH_CHECKS=true
METRICS_ENABLED=true
SLACK_WEBHOOK_URL=
EMAIL_ALERTS=true
FAILURE_RATE_ALERT_THRESHOLD=5.0
RESPONSE_TIME_ALERT_THRESHOLD_MS=5000
QUEUE_DEPTH_ALERT_THRESHOLD=100

# API Configuration
SWAGGER_ENABLED=true
SWAGGER_PATH=docs

# Microservices Communication
USER_SERVICE_URL=http://localhost:3001
USER_SERVICE_TIMEOUT=5000
TRADING_SERVICE_URL=http://localhost:3002
TRADING_SERVICE_TIMEOUT=5000
NOTIFICATION_SERVICE_URL=http://localhost:3004
NOTIFICATION_SERVICE_TIMEOUT=5000

# Queue Configuration
PAYMENT_QUEUE_CONCURRENCY=5
PAYMENT_QUEUE_ATTEMPTS=3
PAYMENT_QUEUE_DELAY=5000
WEBHOOK_QUEUE_CONCURRENCY=10
WEBHOOK_QUEUE_ATTEMPTS=5
WEBHOOK_QUEUE_DELAY=1000
NOTIFICATION_QUEUE_CONCURRENCY=20
NOTIFICATION_QUEUE_ATTEMPTS=3
NOTIFICATION_QUEUE_DELAY=2000

# Feature Flags
ENABLE_SUBSCRIPTIONS=true
ENABLE_WALLETS=true
ENABLE_CRYPTO_PAYMENTS=false
ENABLE_MULTI_CURRENCY=true
ENABLE_INVOICING=true
ENABLE_RECURRING_PAYMENTS=true

# Development Configuration
SEED_DATA=false
MOCK_PAYMENTS=false
DEBUG_LOGGING=false
ALLOW_TEST_CARDS=true